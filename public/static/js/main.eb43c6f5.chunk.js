(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{56:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(26),c=n.n(s),o=n(9),i=n(14),l=n(17),j=n(16),d=(n(56),n(57),n(7)),u=n(6),h=n(91),p=n(92),b=n(8),O=n(1),m=function(){return Object(O.jsxs)(h.a,{children:[Object(O.jsx)("h1",{children:"Welcome to Maya Real Estate"}),Object(O.jsx)("p",{children:"Perseverence leads to inspiration"}),Object(O.jsx)(b.b,{to:"/properties",children:Object(O.jsx)(p.a,{className:"btnBlock",children:"All Properties"})})]})},x=n(24),g=n.n(x),v=function e(){var t=this;Object(o.a)(this,e),this.getAllProperties=function(){return t.app.get("/")},this.getProperty=function(e){return t.app.get("/".concat(e))},this.saveProperty=function(e){return t.app.post("/new",e)},this.editProperty=function(e){return t.app.put("/edit/".concat(e._id),e)},this.deleteProperty=function(e){return t.app.delete("/".concat(e))},this.app=g.a.create({baseURL:"https://maya-real-estate.herokuapp.com/api/properties"})},f=n(93),y=(n(86),n(49)),C=function(e){var t=e.name,n=e.description,r=e.image,a=e._id,s=e.owner,c=e.loggedUser;return Object(O.jsx)(y.a,{md:4,children:Object(O.jsxs)("article",{className:"propertyCard",children:[Object(O.jsx)("img",{src:r,alt:t}),Object(O.jsx)("h5",{children:t}),Object(O.jsxs)("p",{children:[n.slice(0,70),"..."]}),Object(O.jsxs)(b.b,{to:"/properties/details/".concat(a),children:[Object(O.jsx)(p.a,{className:"btnBlock",children:"Details"}),"agent"===c.role&&s===c._id||"admin"===c.role?Object(O.jsxs)("div",{className:"btnGroupOwner",children:[Object(O.jsx)(p.a,{className:"btn45",variant:"secondary",children:"Edit"}),Object(O.jsx)(p.a,{className:"btn45",variant:"danger",children:"Delete"})]}):null]})]})})},w=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).loadProperties=function(){e.propertiesService.getAllProperties().then((function(t){return e.setState({properties:t.data})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.loadProperties()},e.state={properties:void 0},e.propertiesService=new v,e}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this,n=this.state.properties?Object(O.jsx)(f.a,{children:null===(e=this.state.properties)||void 0===e?void 0:e.map((function(e){return Object(O.jsx)(C,Object(d.a)(Object(d.a)({},e),{},{loggedUser:t.props.loggedUser}),e._id)}))}):Object(O.jsx)("h1",{children:"waiting..."});return Object(O.jsx)(O.Fragment,{children:n})}}]),n}(r.Component),U=function(e){return Object(O.jsxs)(h.a,{children:[Object(O.jsx)("h1",{children:"Properties list goes here"}),Object(O.jsx)(w,{loggedUser:e}),Object(O.jsx)("p",{style:{marginBottom:"3rem"}})]})},I=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={property:void 0},e.propertyService=new v,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.property_id;this.propertyService.getProperty(t).then((function(t){return e.setState({property:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e;return console.log(this.state.property,null===(e=this.props.loggedUser)||void 0===e?void 0:e._id),this.state.property?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(f.a,{className:"justify-content-around",children:[Object(O.jsxs)(y.a,{md:6,children:[Object(O.jsx)("h1",{children:this.state.property.name}),Object(O.jsx)("p",{children:this.state.property.description}),Object(O.jsx)("hr",{}),Object(O.jsx)(b.b,{to:"/properties",className:"btn btn-dark",children:"Properties"})]}),Object(O.jsx)(y.a,{md:4,children:Object(O.jsx)("img",{src:this.state.property.image,alt:this.state.property.name,style:{width:"100%"}})})]})}):Object(O.jsx)("h4",{children:"waiting..."})}}]),n}(r.Component),S=n(20),k=n(38),L=n(95),P=function e(){var t=this;Object(o.a)(this,e),this.uploadImage=function(e){return t.app.post("/image",e)},this.app=g.a.create({baseURL:"https://maya-real-estate.herokuapp.com/api/upload",withCredentials:!0})},N=(n(87),function(e){var t=e.size,n={width:t,height:t};return Object(O.jsx)("div",{className:"spinner",style:n})}),G=function(e){var t=Object(r.useState)({name:"",description:"",type:"",status:"",autonomousCommunity:"",city:"",size:"",rooms:"",bathrooms:"",price:"",discountedPrice:"",image:"",owner:""}),n=Object(k.a)(t,2),a=n[0],s=n[1];console.log(e.loggedUser._id);var c=Object(r.useState)(!1),o=Object(k.a)(c,2),i=o[0],l=o[1],j=new v,u=new P,b=function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(S.a)({},n,r))}))};return Object(O.jsx)(h.a,{children:Object(O.jsx)(f.a,{children:Object(O.jsxs)(y.a,{md:{span:6,offset:3},children:[Object(O.jsx)("h1",{children:"New Property"}),Object(O.jsx)("hr",{}),Object(O.jsxs)(L.a,{onSubmit:function(t){t.preventDefault(),s((function(t){return Object(d.a)(Object(d.a)({},t),{},{owner:e.loggedUser._id})})),j.saveProperty(a).then((function(){s({name:"",description:"",type:"",status:"",autonomousCommunity:"",city:"",size:"",rooms:"",bathrooms:"",price:"",discountedPrice:"",image:""}),e.history.push("/properties")})).catch((function(e){return console.log(e)}))},children:[Object(O.jsxs)(L.a.Group,{controlId:"name",children:[Object(O.jsx)(L.a.Label,{children:"Title"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.name,onChange:b,name:"name"})]}),Object(O.jsxs)(L.a.Group,{controlId:"desc",children:[Object(O.jsx)(L.a.Label,{children:"Description"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.description,onChange:b,name:"description"})]}),Object(O.jsxs)(L.a.Group,{controlId:"inve",children:[Object(O.jsx)(L.a.Label,{children:"Type"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.type,onChange:b,name:"type"})]}),Object(O.jsxs)(L.a.Group,{controlId:"status",children:[Object(O.jsx)(L.a.Label,{children:"Status"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.status,onChange:b,name:"status"})]}),Object(O.jsxs)(L.a.Group,{controlId:"autonomousCommunity",children:[Object(O.jsx)(L.a.Label,{children:"Autonomous Community"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.autonomousCommunity,onChange:b,name:"autonomousCommunity"})]}),Object(O.jsxs)(L.a.Group,{controlId:"city",children:[Object(O.jsx)(L.a.Label,{children:"City"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.city,onChange:b,name:"city"})]}),Object(O.jsxs)(L.a.Group,{controlId:"size",children:[Object(O.jsx)(L.a.Label,{children:"Size"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.size,onChange:b,name:"size"})]}),Object(O.jsxs)(L.a.Group,{controlId:"rooms",children:[Object(O.jsx)(L.a.Label,{children:"Rooms"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.rooms,onChange:b,name:"rooms"})]}),Object(O.jsxs)(L.a.Group,{controlId:"bathrooms",children:[Object(O.jsx)(L.a.Label,{children:"Bathrooms"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.bathrooms,onChange:b,name:"bathrooms"})]}),Object(O.jsxs)(L.a.Group,{controlId:"price",children:[Object(O.jsx)(L.a.Label,{children:"Price"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.price,onChange:b,name:"price"})]}),Object(O.jsxs)(L.a.Group,{controlId:"discountedPrice",children:[Object(O.jsx)(L.a.Label,{children:"Discounted Price"}),Object(O.jsx)(L.a.Control,{type:"text",value:a.discountedPrice,onChange:b,name:"discountedPrice"})]}),Object(O.jsxs)(L.a.Group,{controlId:"image",children:[Object(O.jsx)(L.a.Label,{children:"Upload Local Image"}),Object(O.jsx)(L.a.Control,{type:"file",onChange:function(e){l(!0);var t=new FormData;t.append("imageData",e.target.files[0]),u.uploadImage(t).then((function(e){s((function(t){return Object(d.a)(Object(d.a)({},t),{},{image:e.data.cloudinary_url})})),l(!1)})).catch((function(e){return console.log(e)}))}})]}),Object(O.jsxs)(p.a,{style:{marginTop:"20px",width:"100%"},variant:"dark",type:"submit",disabled:i,children:[i?Object(O.jsx)(N,{size:30}):null,i?"Uploading image...":"Create property"]})]})]})})})},D=function e(){var t=this;Object(o.a)(this,e),this.login=function(e,n){return t.app.post("/login",{email:e,pwd:n})},this.signup=function(e,n,r,a){return t.app.post("/signup",{email:e,pwd:n,name:r,surname:a})},this.logout=function(){return t.app.get("/logout")},this.isLoggedIn=function(){return t.app.get("/isLoggedIn")},this.app=g.a.create({baseURL:"https://maya-real-estate.herokuapp.com/api/auth",withCredentials:!0})},F=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleInputChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState(Object(S.a)({},r,a))},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.email,a=n.pwd,s=n.name,c=n.surname;e.authService.signup(r,a,s,c).then((function(){return e.props.history.push("/logIn")})).catch((function(e){return console.log(e)}))},e.state={email:"",pwd:"",name:"",surname:""},e.authService=new D,e}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)(h.a,{children:Object(O.jsx)(f.a,{children:Object(O.jsxs)(y.a,{md:{span:4,offset:4},children:[Object(O.jsx)("h1",{children:"Sign Up"}),Object(O.jsx)("hr",{}),Object(O.jsxs)(L.a,{onSubmit:this.handleFormSubmit,children:[Object(O.jsxs)(L.a.Group,{controlId:"email",children:[Object(O.jsx)(L.a.Label,{children:"email"}),Object(O.jsx)(L.a.Control,{type:"text",value:this.state.email,onChange:this.handleInputChange,name:"email"})]}),Object(O.jsxs)(L.a.Group,{controlId:"pwd",children:[Object(O.jsx)(L.a.Label,{children:"Password"}),Object(O.jsx)(L.a.Control,{type:"password",value:this.state.pwd,onChange:this.handleInputChange,name:"pwd"})]}),Object(O.jsxs)(L.a.Group,{controlId:"name",children:[Object(O.jsx)(L.a.Label,{children:"name"}),Object(O.jsx)(L.a.Control,{type:"text",value:this.state.name,onChange:this.handleInputChange,name:"name"})]}),Object(O.jsxs)(L.a.Group,{controlId:"surname",children:[Object(O.jsx)(L.a.Label,{children:"surname"}),Object(O.jsx)(L.a.Control,{type:"text",value:this.state.surname,onChange:this.handleInputChange,name:"surname"})]}),Object(O.jsx)(p.a,{style:{marginTop:"20px",width:"100%"},variant:"dark",type:"submit",children:"Sign Up"})]}),Object(O.jsx)("hr",{}),Object(O.jsx)(b.b,{to:"/properties",children:Object(O.jsx)(p.a,{variant:"dark",children:"All Properties"})})]})})})}}]),n}(r.Component),_=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleInputChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState(Object(S.a)({},r,a))},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,r=n.email,a=n.pwd;e.authService.login(r,a).then((function(t){e.props.storeUser(t.data),e.props.history.push("/properties")})).catch((function(e){return console.log(e)}))},e.state={email:"",pwd:""},e.authService=new D,e}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsx)(h.a,{children:Object(O.jsx)(f.a,{children:Object(O.jsxs)(y.a,{md:{span:4,offset:4},children:[Object(O.jsx)("h1",{children:"Log In"}),Object(O.jsx)("hr",{}),Object(O.jsxs)(L.a,{onSubmit:this.handleFormSubmit,children:[Object(O.jsxs)(L.a.Group,{controlId:"email",children:[Object(O.jsx)(L.a.Label,{children:"Email"}),Object(O.jsx)(L.a.Control,{type:"text",value:this.state.email,onChange:this.handleInputChange,name:"email"})]}),Object(O.jsxs)(L.a.Group,{controlId:"pwd",children:[Object(O.jsx)(L.a.Label,{children:"Password"}),Object(O.jsx)(L.a.Control,{type:"password",value:this.state.pwd,onChange:this.handleInputChange,name:"pwd"})]}),Object(O.jsx)(p.a,{style:{marginTop:"20px",width:"100%"},variant:"dark",type:"submit",children:"Log In"})]}),Object(O.jsx)("hr",{}),Object(O.jsx)(b.b,{to:"/",children:Object(O.jsx)(p.a,{variant:"dark",children:"Home"})})]})})})}}]),n}(r.Component),z=function(e){var t=e.storeUser,n=e.loggedUser;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.c,{children:[Object(O.jsx)(u.a,{path:"/",exact:!0,render:function(){return Object(O.jsx)(m,{})}}),Object(O.jsx)(u.a,{path:"/properties",exact:!0,render:function(){return Object(O.jsx)(U,Object(d.a)({},n))}}),Object(O.jsx)(u.a,{path:"/properties/details/:property_id",render:function(e){return Object(O.jsx)(I,Object(d.a)(Object(d.a)({},e),{},{loggedUser:n}))}}),Object(O.jsx)(u.a,{path:"/properties/new",render:function(e){return Object(O.jsx)(G,Object(d.a)(Object(d.a)({},e),{},{loggedUser:n}))}}),Object(O.jsx)(u.a,{path:"/signup",render:function(e){return Object(O.jsx)(F,Object(d.a)({},e))}}),Object(O.jsx)(u.a,{path:"/login",render:function(e){return Object(O.jsx)(_,Object(d.a)(Object(d.a)({},e),{},{storeUser:t}))}})]})})},B=function(){return Object(O.jsx)("footer",{style:{background:"#212529",color:"white",textAlign:"center",fontSize:".7em",position:"fixed",bottom:0,padding:5,width:"100%"},children:"Persistance leads to inspiration."})},A=n(94),R=n(96),T=function(e){var t=e.storeUser,n=e.loggedUser,r=new D;return Object(O.jsxs)(A.a,{bg:"dark",variant:"dark",expand:"md",style:{marginBottom:"30px"},children:[Object(O.jsx)(A.a.Brand,{href:"#home",children:"Haya Real Estate"}),Object(O.jsx)(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(A.a.Collapse,{className:"justify-content-end",children:Object(O.jsxs)(R.a,{className:"mr-auto",children:[Object(O.jsx)(b.b,{className:"nav-link",to:"/",children:"Home"}),Object(O.jsx)(b.b,{className:"nav-link",to:"/properties",children:"Properties"}),!n||"admin"!==n.role&&"agent"!==n.role?null:Object(O.jsx)(b.b,{className:"nav-link",to:"/properties/new",children:"New"}),n?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("span",{className:"nav-link",onClick:function(){r.logout().then((function(){return t(void 0)})).catch((function(e){return console.log(e)}))},children:"LogOut"})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(b.b,{className:"nav-link",to:"/signup",children:"SignUp"}),Object(O.jsx)(b.b,{className:"nav-link",to:"/login",children:"LogIn"})]}),Object(O.jsxs)("span",{className:"nav-link",children:["Hello ",n?", "+n.name:"","!"]})]})})]})},E=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).storeUser=function(t){return e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isLoggedIn().then((function(t){return e.storeUser(t.data)})).catch((function(){return e.storeUser(void 0)}))},e.componentDidMount=function(){return e.fetchUser()},e.state={loggedUser:void 0},e.authService=new D,e}return Object(i.a)(n,[{key:"render",value:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(T,{storeUser:this.storeUser,loggedUser:this.state.loggedUser}),Object(O.jsx)(z,{storeUser:this.storeUser,loggedUser:this.state.loggedUser}),Object(O.jsx)(B,{})]})}}]),n}(r.Component);c.a.render(Object(O.jsx)(b.a,{children:Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(E,{})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.eb43c6f5.chunk.js.map